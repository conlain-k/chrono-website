<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- For Mobile Devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta name="generator" content="Doxygen 1.8.11"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Exo+2:400,200,700' type='text/css'>
    <title>Project Chrono: Export POVray animations (demo_postprocess.cpp)</title>
    <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
    <link href="main.css" rel="stylesheet" type="text/css" />
    <!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="doxy-boot.js"></script>
    <script type="text/javascript" src="bootstrap-hover-dropdown.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://projectchrono.org">
            <span class="logo first">PROJECT</span><span class="logo second">CHRONO</span>
        </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="http://projectchrono.org/download">Download</a></li>
        <li class="dropdown">
            <a href="http://api.chrono.projectchrono.org" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" aria-haspopup="true" aria-expanded="false">Documentation <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://api.chrono.projectchrono.org/faq_root.html">FAQ</a></li>
                <li><a href="http://api.chrono.projectchrono.org/tutorial_table_of_content_install.html">Install Guide</a></li>
                <li><a href="http://api.chrono.projectchrono.org/tutorial_root.html">Examples/Tutorials</a></li>
                <li><a href="http://api.chrono.projectchrono.org/model_root.html">Model Library</a></li>
                <li><a href="http://api.chrono.projectchrono.org/validation_studies_root.html">Validation Studies</a></li>
                <li><a href="http://api.chrono.projectchrono.org/whitepaper_root.html">White Papers</a></li>
                <li><a href="http://projectchrono.org/docpdf">PDF Version</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a href="http://projectchrono.org/gallery/" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" style="dropdown:hover" aria-haspopup="true" aria-expanded="false">Movies <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://projectchrono.org/gallery/">Gallery</a></li>
                <li><a href="http://sbel.wisc.edu/Animations/">SBEL</a></li>
                <li><a href="https://vimeo.com/uwsbel">On Vimeo</a></li>
            </ul>
        </li>
        <li><a href="http://projectchrono.org/news/">News</a></li>
        <li><a href="http://projectchrono.org/forum">Forum</a></li>
		<li class="dropdown">
            <a href="http://projectchrono.org/about/" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://projectchrono.org/about/">What is ProjectChrono</a></li>
                <li><a href="http://projectchrono.org/testimonials/">Users</a></li>
            </ul>
        </li>
        <li><a href="http://projectchrono.org/status">Status</a></li>            
            <li>
              <form method="get" action="http://projectchrono.org/search" id="search_bar_triggered">
                          <input type="submit" value="Search">
                <input type="text" id="search_bar" name="query" value="" />
              </form> 
            </li>
    </ul>
          <!-- <ul class="nav navbar-nav navbar-right">
      </ul> -->
  </div><!--/.navbar-collapse -->
</div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
                    <div style="margin-bottom: 15px;">
                        <!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Project Chrono API/SDK documentation</a></li><li class="navelem"><a class="el" href="manual_root.html">Reference Manual</a></li><li class="navelem"><a class="el" href="tutorial_root.html">Tutorials</a></li><li class="navelem"><a class="el" href="tutorial_table_of_content_chrono_postprocessing.html">Chrono POSTPROCESSING module tutorials</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Export POVray animations (demo_postprocess.cpp) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Tutorial that teaches how to use the POSTPROCESSING module to create animations with <a href="http://www.povray.org">POVray</a>.</p>
<p>When the simulation is run, a set of .pov and .ini files are saved on disk, so that one can use POVray later to do high-quality rendering of simulations.</p>
<ul>
<li>Learn how to attach ChAsset shapes to rigid bodies.</li>
<li>Learn how to output data for POVray.</li>
</ul>
<p>Note: the same assets can be used to render animations in real-time in the interactive 3D view of Irrlicht, as explained in demo_irr_assets.cpp</p>
<h1>Example 1</h1>
<p>Create a ChBody, and attach some 'assets' that define 3D shapes. These shapes can be shown by Irrlicht or POV postprocessing, etc... Note: these assets are independent from collision shapes!</p>
<div class="fragment"><div class="line">                <span class="comment">// Create a rigid body as usual, and add it </span></div><div class="line">                <span class="comment">// to the physical system:</span></div><div class="line">ChSharedPtr&lt;ChBody&gt; mfloor(<span class="keyword">new</span> ChBody);</div><div class="line">mfloor-&gt;SetBodyFixed(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">                <span class="comment">// Define a collision shape </span></div><div class="line">mfloor-&gt;GetCollisionModel()-&gt;ClearModel();</div><div class="line">mfloor-&gt;GetCollisionModel()-&gt;AddBox(10,0.5,10, ChVector&lt;&gt;(0,-1,0));</div><div class="line">mfloor-&gt;GetCollisionModel()-&gt;BuildModel();</div><div class="line">mfloor-&gt;SetCollide(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">                <span class="comment">// Add body to system</span></div><div class="line">mphysicalSystem.<a class="code" href="classchrono_1_1_ch_assembly.html#ac45b72a2db1176dbed6731e904a18150">Add</a>(mfloor);</div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== attach a &#39;box&#39; shape.</span></div><div class="line">                <span class="comment">// Note that assets are managed via shared pointer, so they </span></div><div class="line">                <span class="comment">// can also be shared). Do not forget AddAsset() at the end!</span></div><div class="line">ChSharedPtr&lt;ChBoxShape&gt; mboxfloor(<span class="keyword">new</span> ChBoxShape);</div><div class="line">mboxfloor-&gt;GetBoxGeometry().Pos = ChVector&lt;&gt;(0,-1,0);</div><div class="line">mboxfloor-&gt;GetBoxGeometry().Size = ChVector&lt;&gt;(10,0.5,10);</div><div class="line">mfloor-&gt;AddAsset(mboxfloor);</div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== attach color asset. </span></div><div class="line">ChSharedPtr&lt;ChVisualization&gt; mfloorcolor(<span class="keyword">new</span> ChVisualization);</div><div class="line">mfloorcolor-&gt;SetColor(ChColor(0.3,0.3,0.6));</div><div class="line">mfloor-&gt;AddAsset(mfloorcolor);</div></div><!-- fragment --><h1>Example 2</h1>
<p>Textures, colors, asset levels with transformations. This section shows how to add more advanced types of assets and how to group assets in ChAssetLevel containers.</p>
<div class="fragment"><div class="line">                <span class="comment">// Create the rigid body as usual (this won&#39;t move,</span></div><div class="line">                <span class="comment">// it is only for visualization tests)</span></div><div class="line">ChSharedPtr&lt;ChBody&gt; mbody(<span class="keyword">new</span> ChBody);</div><div class="line">mbody-&gt;SetBodyFixed(<span class="keyword">true</span>);</div><div class="line">mphysicalSystem.<a class="code" href="classchrono_1_1_ch_assembly.html#ac45b72a2db1176dbed6731e904a18150">Add</a>(mbody);</div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== Attach a &#39;sphere&#39; shape  </span></div><div class="line">ChSharedPtr&lt;ChSphereShape&gt; msphere(<span class="keyword">new</span> ChSphereShape);</div><div class="line">msphere-&gt;GetSphereGeometry().rad = 0.5;</div><div class="line">msphere-&gt;GetSphereGeometry().center = ChVector&lt;&gt;(-1,0,0);</div><div class="line">mbody-&gt;AddAsset(msphere);</div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== Attach also a &#39;box&#39; shape </span></div><div class="line">ChSharedPtr&lt;ChBoxShape&gt; mbox(<span class="keyword">new</span> ChBoxShape);</div><div class="line">mbox-&gt;GetBoxGeometry().Pos = ChVector&lt;&gt;(1,0,0);</div><div class="line">mbox-&gt;GetBoxGeometry().Size = ChVector&lt;&gt;(0.2,0.5,0.1);</div><div class="line">mbody-&gt;AddAsset(mbox);</div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== Attach also a &#39;cylinder&#39; shape </span></div><div class="line">ChSharedPtr&lt;ChCylinderShape&gt; mcyl(<span class="keyword">new</span> ChCylinderShape);</div><div class="line">mcyl-&gt;GetCylinderGeometry().p1  = ChVector&lt;&gt;(2,-0.2,0);</div><div class="line">mcyl-&gt;GetCylinderGeometry().p2  = ChVector&lt;&gt;(2.2,0.5,0);</div><div class="line">mcyl-&gt;GetCylinderGeometry().rad = 0.3;</div><div class="line">mbody-&gt;AddAsset(mcyl);</div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== Attach color. To set colors for all assets  </span></div><div class="line">                <span class="comment">// in the same level, just add this:</span></div><div class="line">ChSharedPtr&lt;ChVisualization&gt; mvisual(<span class="keyword">new</span> ChVisualization);</div><div class="line">mvisual-&gt;SetColor(ChColor(0.9,0.4,0.2));</div><div class="line">mbody-&gt;AddAsset(mvisual);</div><div class="line"></div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== Attach a level that contains other assets.</span></div><div class="line">                <span class="comment">// Note: a ChAssetLevel can define a rotation/translation respect to paren level,</span></div><div class="line">                <span class="comment">// Note: a ChAssetLevel can contain colors or textures: if any, they affect only objects in the level.</span></div><div class="line">ChSharedPtr&lt;ChAssetLevel&gt; mlevelA(<span class="keyword">new</span> ChAssetLevel);</div><div class="line"></div><div class="line">                        <span class="comment">// ==Asset== Attach, in this level, a &#39;Wavefront mesh&#39; asset, </span></div><div class="line">                        <span class="comment">// referencing a .obj file:</span></div><div class="line">ChSharedPtr&lt;ChObjShapeFile&gt; mobjmesh(<span class="keyword">new</span> ChObjShapeFile);</div><div class="line">mobjmesh-&gt;SetFilename(<span class="stringliteral">&quot;../data/forklift_body.obj&quot;</span>); </div><div class="line">mlevelA-&gt;AddAsset(mobjmesh);</div><div class="line"></div><div class="line">                        <span class="comment">// ==Asset== Attach also a texture, that will affect only the </span></div><div class="line">                        <span class="comment">// assets in mlevelA:</span></div><div class="line">ChSharedPtr&lt;ChTexture&gt; mtexture(<span class="keyword">new</span> ChTexture);</div><div class="line">mtexture-&gt;SetTextureFilename(<span class="stringliteral">&quot;../data/bluwhite.png&quot;</span>);</div><div class="line">mlevelA-&gt;AddAsset(mtexture);</div><div class="line"></div><div class="line">                <span class="comment">// Change the position of mlevelA, thus moving also its sub-assets:</span></div><div class="line">mlevelA-&gt;GetFrame().SetPos(ChVector&lt;&gt;(0,0,2));</div><div class="line">mbody-&gt;AddAsset(mlevelA);</div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== Attach sub level, then add to it an array of sub-levels, </span></div><div class="line">                <span class="comment">// each rotated, and each containing a displaced box, thus making a </span></div><div class="line">                <span class="comment">// spiral of cubes</span></div><div class="line">ChSharedPtr&lt;ChAssetLevel&gt; mlevelB(<span class="keyword">new</span> ChAssetLevel);</div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j&lt;20; j++)</div><div class="line">{</div><div class="line">                        <span class="comment">// ==Asset== the sub sub level..</span></div><div class="line">        ChSharedPtr&lt;ChAssetLevel&gt; mlevelC(<span class="keyword">new</span> ChAssetLevel);</div><div class="line"></div><div class="line">                                <span class="comment">// ==Asset== the contained box..</span></div><div class="line">        ChSharedPtr&lt;ChBoxShape&gt; msmallbox(<span class="keyword">new</span> ChBoxShape);</div><div class="line">        msmallbox-&gt;GetBoxGeometry().Pos = ChVector&lt;&gt;(0.4,0,0);</div><div class="line">        msmallbox-&gt;GetBoxGeometry().Size = ChVector&lt;&gt;(0.1,0.1,0.01);</div><div class="line">        mlevelC-&gt;AddAsset(msmallbox);</div><div class="line"></div><div class="line">        ChQuaternion&lt;&gt; mrot;</div><div class="line">        mrot.<a class="code" href="classchrono_1_1_ch_quaternion.html#aee8c97aac91a7c1f9bf3b62cea5bdcc2">Q_from_AngAxis</a>(j*21*CH_C_DEG_TO_RAD, ChVector&lt;&gt;(0,1,0));</div><div class="line">        mlevelC-&gt;GetFrame().SetRot(mrot);</div><div class="line">        mlevelC-&gt;GetFrame().SetPos(ChVector&lt;&gt;(0,j*0.02,0));</div><div class="line"></div><div class="line">        mlevelB-&gt;AddAsset(mlevelC);</div><div class="line">}</div><div class="line"></div><div class="line">mbody-&gt;AddAsset(mlevelB);</div><div class="line"></div><div class="line">                <span class="comment">// ==Asset== Attach a video camera. This will be used by Irrlicht, </span></div><div class="line">                <span class="comment">// or POVray postprocessing, etc. Note that a camera can also be </span></div><div class="line">                <span class="comment">// put in a moving object.</span></div><div class="line">ChSharedPtr&lt;ChCamera&gt; mcamera(<span class="keyword">new</span> ChCamera);</div><div class="line">mcamera-&gt;SetAngle(50);</div><div class="line">mcamera-&gt;SetPosition(ChVector&lt;&gt;(-3,4,-5));</div><div class="line">mcamera-&gt;SetAimPoint(ChVector&lt;&gt;(0,1,0));</div><div class="line">mbody-&gt;AddAsset(mcamera);</div></div><!-- fragment --><h1>Example 3</h1>
<p>Create a ChParticleClones cluster, and attach 'assets' that define a single "sample" 3D shape. This will be shown N times in POV or Irrlicht.</p>
<div class="fragment"><div class="line">                <span class="comment">// Create the ChParticleClones, populate it with some random particles,</span></div><div class="line">                <span class="comment">// and add it to physical system:</span></div><div class="line">ChSharedPtr&lt;ChParticlesClones&gt; mparticles(<span class="keyword">new</span> ChParticlesClones);</div><div class="line"></div><div class="line">                <span class="comment">// Note: coll. shape, if needed, must be specified before creating particles</span></div><div class="line">mparticles-&gt;GetCollisionModel()-&gt;ClearModel();</div><div class="line">mparticles-&gt;GetCollisionModel()-&gt;AddSphere(0.05);</div><div class="line">mparticles-&gt;GetCollisionModel()-&gt;BuildModel();</div><div class="line">mparticles-&gt;SetCollide(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">                <span class="comment">// Create the random particles </span></div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> np=0; np&lt;100; ++np)</div><div class="line">        mparticles-&gt;AddParticle(ChCoordsys&lt;&gt;(ChVector&lt;&gt;(<a class="code" href="namespacechrono.html#adea45eb9ba968996caccfd982f39dad2">ChRandom</a>()-2,1.5,<a class="code" href="namespacechrono.html#adea45eb9ba968996caccfd982f39dad2">ChRandom</a>()+2)));</div><div class="line"></div><div class="line">                <span class="comment">// Do not forget to add the particle cluster to the system:</span></div><div class="line">mphysicalSystem.<a class="code" href="classchrono_1_1_ch_assembly.html#ac45b72a2db1176dbed6731e904a18150">Add</a>(mparticles);</div><div class="line"></div><div class="line">                <span class="comment">//  ==Asset== Attach a &#39;sphere&#39; shape asset.. it will be used as a sample </span></div><div class="line">                <span class="comment">// shape to display all particles when rendering in 3D! </span></div><div class="line">ChSharedPtr&lt;ChSphereShape&gt; mspherepart(<span class="keyword">new</span> ChSphereShape);</div><div class="line">mspherepart-&gt;GetSphereGeometry().rad = 0.05;</div><div class="line">mparticles-&gt;AddAsset(mspherepart);</div></div><!-- fragment --><h1>The POV exporter</h1>
<p>The following part is very important because this is what makes this demo different from the demo_irr_assets, that used Irrlicht. We need to create a postprocessor of type ChPovRay and tell him that we are going to export our visualization assets:</p>
<div class="fragment"><div class="line">                    <span class="comment">// Create an exporter to POVray !!!</span></div><div class="line"></div><div class="line">    ChPovRay pov_exporter = ChPovRay(&amp;mphysicalSystem);</div><div class="line"></div><div class="line">                    <span class="comment">// Sets some file names for in-out processes.</span></div><div class="line">    pov_exporter.SetTemplateFile            (<span class="stringliteral">&quot;../data/_template_POV.pov&quot;</span>);</div><div class="line">    pov_exporter.SetOutputScriptFile    (<span class="stringliteral">&quot;rendering_frames.pov&quot;</span>);</div><div class="line">    pov_exporter.SetOutputDataFilebase  (<span class="stringliteral">&quot;my_state&quot;</span>);</div><div class="line">    pov_exporter.SetPictureFilebase     (<span class="stringliteral">&quot;picture&quot;</span>);</div><div class="line"></div><div class="line">                    <span class="comment">// Even better: save the .dat files and the .bmp files</span></div><div class="line">                    <span class="comment">// in two subdirectories, to avoid cluttering the current</span></div><div class="line">                    <span class="comment">// directory...</span></div><div class="line">    ChFileutils::MakeDirectory(<span class="stringliteral">&quot;output&quot;</span>);</div><div class="line">    ChFileutils::MakeDirectory(<span class="stringliteral">&quot;anim&quot;</span>);</div><div class="line"></div><div class="line">    pov_exporter.SetOutputDataFilebase(<span class="stringliteral">&quot;output/my_state&quot;</span>);</div><div class="line">    pov_exporter.SetPictureFilebase(<span class="stringliteral">&quot;anim/picture&quot;</span>);</div><div class="line"></div><div class="line">                    <span class="comment">// --Optional: modify default light</span></div><div class="line">    pov_exporter.SetLight(ChVector&lt;&gt;(-3,4,2), ChColor(0.15,0.15,0.12), <span class="keyword">false</span>);</div><div class="line"></div><div class="line">                    <span class="comment">// --Optional: add further POV commands, for example in this case:</span></div><div class="line">                    <span class="comment">//     create an area light for soft shadows</span></div><div class="line">                    <span class="comment">//     create a Grid object; Grid() parameters: step, linewidth, linecolor, planecolor</span></div><div class="line">                    <span class="comment">//   Remember to use \ at the end of each line for a multiple-line string.</span></div><div class="line">    pov_exporter.SetCustomPOVcommandsScript(<span class="stringliteral">&quot; \</span></div><div class="line"><span class="stringliteral">            light_source {   \</span></div><div class="line"><span class="stringliteral">            &lt;2, 10, -3&gt;  \</span></div><div class="line"><span class="stringliteral">            color rgb&lt;1.2,1.2,1.2&gt; \</span></div><div class="line"><span class="stringliteral">            area_light &lt;4, 0, 0&gt;, &lt;0, 0, 4&gt;, 8, 8 \</span></div><div class="line"><span class="stringliteral">            adaptive 1 \</span></div><div class="line"><span class="stringliteral">            jitter\</span></div><div class="line"><span class="stringliteral">            } \</span></div><div class="line"><span class="stringliteral">            object{ Grid(1,0.02, rgb&lt;0.7,0.8,0.8&gt;, rgbt&lt;1,1,1,1&gt;) rotate &lt;0, 0, 90&gt;  } \</span></div><div class="line"><span class="stringliteral">&quot;</span>);</div><div class="line"></div><div class="line">                    <span class="comment">// --Optional: attach additional custom POV commands to some of the rigid bodies,</span></div><div class="line">                    <span class="comment">//   using the ChPovRayAssetCustom asset. This asset for example projects a </span></div><div class="line">                    <span class="comment">//   checkered texture to the floor. This POV specific asset won&#39;t be rendered </span></div><div class="line">                    <span class="comment">//   by Irrlicht or other interfaces.</span></div><div class="line">    ChSharedPtr&lt;ChPovRayAssetCustom&gt; mPOVcustom(<span class="keyword">new</span> ChPovRayAssetCustom);</div><div class="line">    mPOVcustom-&gt;SetCommands(<span class="stringliteral">&quot;pigment { checker rgb&lt;0.9,0.9,0.9&gt;, rgb&lt;0.75,0.8,0.8&gt; }&quot;</span>);</div><div class="line">    mfloor-&gt;AddAsset(mPOVcustom);</div><div class="line"></div><div class="line"></div><div class="line">                    <span class="comment">// IMPORTANT! Tell to the POVray exporter that </span></div><div class="line">                    <span class="comment">// he must take care of converting the shapes of</span></div><div class="line">                    <span class="comment">// all items!</span></div><div class="line"></div><div class="line">    pov_exporter.AddAll();</div><div class="line"></div><div class="line">                    <span class="comment">// (Optional: tell selectively which physical items you </span></div><div class="line">                    <span class="comment">// want to render in the folllowing way...)</span></div><div class="line">                    <span class="comment">//      pov_exporter.RemoveAll();</span></div><div class="line">                    <span class="comment">//      pov_exporter.Add(mfloor);</span></div><div class="line">                    <span class="comment">//      pov_exporter.Add(mbody);</span></div><div class="line">                    <span class="comment">//      pov_exporter.Add(mparticles);</span></div></div><!-- fragment --><h1>The simulation loop</h1>
<p>Now you have to write the usual while() loop to perform the simulation. Note that before running the loop you need to use pov_exporter.ExportScript(); , and for each timestep you must use pov_exporter.ExportData(); actually this is the instruction that creates the many .dat and .pov files in the output directory.</p>
<div class="fragment"><div class="line"><span class="comment">// 1) Create the two .pov and .ini files for POV-Ray (this must be done</span></div><div class="line"><span class="comment">//    only once at the beginning of the simulation).</span></div><div class="line"></div><div class="line">pov_exporter.ExportScript();</div><div class="line"></div><div class="line"><span class="keywordflow">while</span> (mphysicalSystem.<a class="code" href="classchrono_1_1_ch_obj.html#a16b228cfd939fa5d7417bca15c4e54b6">GetChTime</a>() &lt; 1.5) </div><div class="line">{</div><div class="line">        mphysicalSystem.<a class="code" href="classchrono_1_1_ch_system.html#a552f40a0951fa8dc3c1e00900fd3b48c">DoStepDynamics</a>(0.01);</div><div class="line"></div><div class="line">        <a class="code" href="namespacechrono.html#a4fba60cf9a29db628ad96a88b60b4e00">GetLog</a>()&lt;&lt; <span class="stringliteral">&quot;time= &quot;</span> &lt;&lt; mphysicalSystem.<a class="code" href="classchrono_1_1_ch_obj.html#a16b228cfd939fa5d7417bca15c4e54b6">GetChTime</a>() &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">        <span class="comment">// 2) Create the incremental nnnn.dat and nnnn.pov files that will be load</span></div><div class="line">        <span class="comment">//    by the pov .ini script in POV-Ray (do this at each simulation timestep)</span></div><div class="line">        pov_exporter.ExportData();</div><div class="line">}</div></div><!-- fragment --><h1>Executing and rendering with POVray</h1>
<p>Once you created your program, compile it, then:</p>
<ul>
<li>execute the <code>demo_postprocess.exe</code></li>
<li>on the console you will see a time counter showing that the system is load and it is being simulated</li>
<li>when the program ends, you must open POVray and open the <code>rendering_frames.pov.ini</code> file, using the Open menu or button, or drag&amp;drop (you can find this .ini file and other POVray as they are saved in the same directory of the executable)</li>
</ul>
<div class="image">
<img src="http://projectchrono.org/assets/manual/Povray.jpg" />
</div>
<ul>
<li>press the Run button in POVray to execute the .ini file , and you should see that POVray generates lot of frames, being saved in the directory <code>anim</code>.</li>
</ul>
<div class="image">
<img src="http://projectchrono.org/assets/manual/Tutorial_pov.jpg" />
</div>
<h1>Optional encoding into an AVI or MPEG animation</h1>
<p>If you want to generate a .mpeg or .avi animation from the rendered .bmp images, we suggest to use the VirtualDub tool:</p>
<div class="image">
<img src="http://projectchrono.org/assets/manual/Tutorial_pov2.jpg" />
</div>
<ul>
<li>drag&amp;drop the first .jpg frame in its interface; it will automatically load all other frames in the timeline</li>
<li>use menu Video/Compression... to setup the proper video codec (suggested: Xvid, DivX, mpeg4, etc.)</li>
<li>use menu File/Save As Avi... to encode and save the animation on disk.</li>
</ul>
<h1>Listing</h1>
<p>In the following we report the entire source code for reference.</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// PROJECT CHRONO - http://projectchrono.org</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Copyright (c) 2013 Project Chrono</span></div><div class="line"><span class="comment">// All rights reserved.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div><div class="line"><span class="comment">// found in the LICENSE file at the top level of the distribution</span></div><div class="line"><span class="comment">// and at http://projectchrono.org/license-chrono.txt.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//   Demo code about</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//     - using the assets system to create shapes</span></div><div class="line"><span class="comment">//       that can be shown in the 3D postprocessing,</span></div><div class="line"><span class="comment">//       by using POVray.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//       CHRONO</span></div><div class="line"><span class="comment">//   ------</span></div><div class="line"><span class="comment">//   Multibody dinamics engine</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// ------------------------------------------------</span></div><div class="line"><span class="comment">//             http://www.projectchrono.org</span></div><div class="line"><span class="comment">// ------------------------------------------------</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="preprocessor">#include &quot;chrono/physics/ChParticlesClones.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/assets/ChBoxShape.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/assets/ChSphereShape.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/assets/ChCylinderShape.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/assets/ChObjShapeFile.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/assets/ChCamera.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/assets/ChColorAsset.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/assets/ChTexture.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/assets/ChAssetLevel.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono/core/ChFileutils.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;chrono_postprocess/ChPovRay.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;chrono_postprocess/ChPovRayAssetCustom.h&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// Use the namespace of Chrono</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacechrono.html">chrono</a>;</div><div class="line"><span class="keyword">using namespace </span>postprocess;  <span class="comment">// &lt;- to keep things shorter</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div><div class="line">    <span class="comment">// Create a Chrono::Engine physical system</span></div><div class="line">    <a class="code" href="classchrono_1_1_ch_system.html">ChSystem</a> mphysicalSystem;</div><div class="line"></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// EXAMPLE 1:</span></div><div class="line">    <span class="comment">//</span></div><div class="line"></div><div class="line">    <span class="comment">// Create a ChBody, and attach some &#39;assets&#39;</span></div><div class="line">    <span class="comment">// that define 3D shapes. These shapes can be shown</span></div><div class="line">    <span class="comment">// by Irrlicht or POV postprocessing, etc...</span></div><div class="line">    <span class="comment">// Note: these assets are independent from collision shapes!</span></div><div class="line"></div><div class="line">    <span class="comment">// Create a rigid body as usual, and add it</span></div><div class="line">    <span class="comment">// to the physical system:</span></div><div class="line">    <span class="keyword">auto</span> mfloor = std::make_shared&lt;ChBody&gt;();</div><div class="line">    mfloor-&gt;SetBodyFixed(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Define a collision shape</span></div><div class="line">    mfloor-&gt;GetCollisionModel()-&gt;ClearModel();</div><div class="line">    mfloor-&gt;GetCollisionModel()-&gt;AddBox(10, 0.5, 10, ChVector&lt;&gt;(0, -1, 0));</div><div class="line">    mfloor-&gt;GetCollisionModel()-&gt;BuildModel();</div><div class="line">    mfloor-&gt;SetCollide(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Add body to system</span></div><div class="line">    mphysicalSystem.<a class="code" href="classchrono_1_1_ch_assembly.html#ac45b72a2db1176dbed6731e904a18150">Add</a>(mfloor);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== attach a &#39;box&#39; shape.</span></div><div class="line">    <span class="comment">// Note that assets are managed via shared pointer, so they</span></div><div class="line">    <span class="comment">// can also be shared). Do not forget AddAsset() at the end!</span></div><div class="line">    <span class="keyword">auto</span> mboxfloor = std::make_shared&lt;ChBoxShape&gt;();</div><div class="line">    mboxfloor-&gt;GetBoxGeometry().Pos = ChVector&lt;&gt;(0, -1, 0);</div><div class="line">    mboxfloor-&gt;GetBoxGeometry().Size = ChVector&lt;&gt;(10, 0.5, 10);</div><div class="line">    mfloor-&gt;AddAsset(mboxfloor);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== attach color asset.</span></div><div class="line">    <span class="keyword">auto</span> mfloorcolor = std::make_shared&lt;ChColorAsset&gt;();</div><div class="line">    mfloorcolor-&gt;SetColor(<a class="code" href="classchrono_1_1_ch_color.html">ChColor</a>(0.3f, 0.3f, 0.6f));</div><div class="line">    mfloor-&gt;AddAsset(mfloorcolor);</div><div class="line"></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// EXAMPLE 2:</span></div><div class="line">    <span class="comment">//</span></div><div class="line"></div><div class="line">    <span class="comment">// Textures, colors, asset levels with transformations.</span></div><div class="line">    <span class="comment">// This section shows how to add more advanced types of assets</span></div><div class="line">    <span class="comment">// and how to group assets in ChAssetLevel containers.</span></div><div class="line"></div><div class="line">    <span class="comment">// Create the rigid body as usual (this won&#39;t move,</span></div><div class="line">    <span class="comment">// it is only for visualization tests)</span></div><div class="line">    <span class="keyword">auto</span> mbody = std::make_shared&lt;ChBody&gt;();</div><div class="line">    mbody-&gt;SetBodyFixed(<span class="keyword">true</span>);</div><div class="line">    mphysicalSystem.<a class="code" href="classchrono_1_1_ch_assembly.html#ac45b72a2db1176dbed6731e904a18150">Add</a>(mbody);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach a &#39;sphere&#39; shape</span></div><div class="line">    <span class="keyword">auto</span> msphere = std::make_shared&lt;ChSphereShape&gt;();</div><div class="line">    msphere-&gt;GetSphereGeometry().rad = 0.5;</div><div class="line">    msphere-&gt;GetSphereGeometry().center = ChVector&lt;&gt;(-1, 0, 0);</div><div class="line">    mbody-&gt;AddAsset(msphere);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach also a &#39;box&#39; shape</span></div><div class="line">    <span class="keyword">auto</span> mbox = std::make_shared&lt;ChBoxShape&gt;();</div><div class="line">    mbox-&gt;GetBoxGeometry().Pos = ChVector&lt;&gt;(1, 0, 0);</div><div class="line">    mbox-&gt;GetBoxGeometry().Size = ChVector&lt;&gt;(0.2, 0.5, 0.1);</div><div class="line">    mbody-&gt;AddAsset(mbox);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach also a &#39;cylinder&#39; shape</span></div><div class="line">    <span class="keyword">auto</span> mcyl = std::make_shared&lt;ChCylinderShape&gt;();</div><div class="line">    mcyl-&gt;GetCylinderGeometry().p1 = ChVector&lt;&gt;(2, -0.2, 0);</div><div class="line">    mcyl-&gt;GetCylinderGeometry().p2 = ChVector&lt;&gt;(2.2, 0.5, 0);</div><div class="line">    mcyl-&gt;GetCylinderGeometry().rad = 0.3;</div><div class="line">    mbody-&gt;AddAsset(mcyl);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach color. To set colors for all assets</span></div><div class="line">    <span class="comment">// in the same level, just add this:</span></div><div class="line">    <span class="keyword">auto</span> mvisual = std::make_shared&lt;ChColorAsset&gt;();</div><div class="line">    mvisual-&gt;SetColor(<a class="code" href="classchrono_1_1_ch_color.html">ChColor</a>(0.9f, 0.4f, 0.2f));</div><div class="line">    mbody-&gt;AddAsset(mvisual);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach a level that contains other assets.</span></div><div class="line">    <span class="comment">// Note: a ChAssetLevel can define a rotation/translation respect to paren level,</span></div><div class="line">    <span class="comment">// Note: a ChAssetLevel can contain colors or textures: if any, they affect only objects in the level.</span></div><div class="line">    <span class="keyword">auto</span> mlevelA = std::make_shared&lt;ChAssetLevel&gt;();</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach, in this level, a &#39;Wavefront mesh&#39; asset,</span></div><div class="line">    <span class="comment">// referencing a .obj file:</span></div><div class="line">    <span class="keyword">auto</span> mobjmesh = std::make_shared&lt;ChObjShapeFile&gt;();</div><div class="line">    mobjmesh-&gt;SetFilename(<a class="code" href="namespacechrono.html#a3bf1da4bd1bc011eeba49d5db828fd53">GetChronoDataFile</a>(<span class="stringliteral">&quot;forklift_body.obj&quot;</span>));</div><div class="line">    mlevelA-&gt;AddAsset(mobjmesh);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach also a texture, that will affect only the</span></div><div class="line">    <span class="comment">// assets in mlevelA:</span></div><div class="line">    <span class="keyword">auto</span> mtexture = std::make_shared&lt;ChTexture&gt;();</div><div class="line">    mtexture-&gt;SetTextureFilename(<a class="code" href="namespacechrono.html#a3bf1da4bd1bc011eeba49d5db828fd53">GetChronoDataFile</a>(<span class="stringliteral">&quot;bluwhite.png&quot;</span>));</div><div class="line">    mlevelA-&gt;AddAsset(mtexture);</div><div class="line"></div><div class="line">    <span class="comment">// Change the position of mlevelA, thus moving also its sub-assets:</span></div><div class="line">    mlevelA-&gt;GetFrame().SetPos(ChVector&lt;&gt;(0, 0, 2));</div><div class="line">    mbody-&gt;AddAsset(mlevelA);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach sub level, then add to it an array of sub-levels,</span></div><div class="line">    <span class="comment">// each rotated, and each containing a displaced box, thus making a</span></div><div class="line">    <span class="comment">// spiral of cubes</span></div><div class="line">    <span class="keyword">auto</span> mlevelB = std::make_shared&lt;ChAssetLevel&gt;();</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 20; j++) {</div><div class="line">        <span class="comment">// ==Asset== the sub sub level..</span></div><div class="line">        <span class="keyword">auto</span> mlevelC = std::make_shared&lt;ChAssetLevel&gt;();</div><div class="line"></div><div class="line">        <span class="comment">// ==Asset== the contained box..</span></div><div class="line">        <span class="keyword">auto</span> msmallbox = std::make_shared&lt;ChBoxShape&gt;();</div><div class="line">        msmallbox-&gt;GetBoxGeometry().Pos = ChVector&lt;&gt;(0.4, 0, 0);</div><div class="line">        msmallbox-&gt;GetBoxGeometry().Size = ChVector&lt;&gt;(0.1, 0.1, 0.01);</div><div class="line">        mlevelC-&gt;AddAsset(msmallbox);</div><div class="line"></div><div class="line">        <a class="code" href="classchrono_1_1_ch_quaternion.html">ChQuaternion&lt;&gt;</a> mrot;</div><div class="line">        mrot.<a class="code" href="classchrono_1_1_ch_quaternion.html#aee8c97aac91a7c1f9bf3b62cea5bdcc2">Q_from_AngAxis</a>(j * 21 * CH_C_DEG_TO_RAD, ChVector&lt;&gt;(0, 1, 0));</div><div class="line">        mlevelC-&gt;GetFrame().SetRot(mrot);</div><div class="line">        mlevelC-&gt;GetFrame().SetPos(ChVector&lt;&gt;(0, j * 0.02, 0));</div><div class="line"></div><div class="line">        mlevelB-&gt;AddAsset(mlevelC);</div><div class="line">    }</div><div class="line"></div><div class="line">    mbody-&gt;AddAsset(mlevelB);</div><div class="line"></div><div class="line">    <span class="comment">// ==Asset== Attach a video camera. This will be used by Irrlicht,</span></div><div class="line">    <span class="comment">// or POVray postprocessing, etc. Note that a camera can also be</span></div><div class="line">    <span class="comment">// put in a moving object.</span></div><div class="line">    <span class="keyword">auto</span> mcamera = std::make_shared&lt;ChCamera&gt;();</div><div class="line">    mcamera-&gt;SetAngle(50);</div><div class="line">    mcamera-&gt;SetPosition(ChVector&lt;&gt;(-3, 4, -5));</div><div class="line">    mcamera-&gt;SetAimPoint(ChVector&lt;&gt;(0, 1, 0));</div><div class="line">    mbody-&gt;AddAsset(mcamera);</div><div class="line"></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// EXAMPLE 3:</span></div><div class="line">    <span class="comment">//</span></div><div class="line"></div><div class="line">    <span class="comment">// Create a ChParticleClones cluster, and attach &#39;assets&#39;</span></div><div class="line">    <span class="comment">// that define a single &quot;sample&quot; 3D shape. This will be shown</span></div><div class="line">    <span class="comment">// N times in Irrlicht.</span></div><div class="line"></div><div class="line">    <span class="comment">// Create the ChParticleClones, populate it with some random particles,</span></div><div class="line">    <span class="comment">// and add it to physical system:</span></div><div class="line">    <span class="keyword">auto</span> mparticles = std::make_shared&lt;ChParticlesClones&gt;();</div><div class="line"></div><div class="line">    <span class="comment">// Note: coll. shape, if needed, must be specified before creating particles</span></div><div class="line">    mparticles-&gt;GetCollisionModel()-&gt;ClearModel();</div><div class="line">    mparticles-&gt;GetCollisionModel()-&gt;AddSphere(0.05);</div><div class="line">    mparticles-&gt;GetCollisionModel()-&gt;BuildModel();</div><div class="line">    mparticles-&gt;SetCollide(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Create the random particles</span></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> np = 0; np &lt; 100; ++np)</div><div class="line">        mparticles-&gt;AddParticle(<a class="code" href="classchrono_1_1_ch_coordsys.html">ChCoordsys&lt;&gt;</a>(ChVector&lt;&gt;(<a class="code" href="namespacechrono.html#adea45eb9ba968996caccfd982f39dad2">ChRandom</a>() - 2, 1, <a class="code" href="namespacechrono.html#adea45eb9ba968996caccfd982f39dad2">ChRandom</a>() -0.5)));</div><div class="line"></div><div class="line">    <span class="comment">// Do not forget to add the particle cluster to the system:</span></div><div class="line">    mphysicalSystem.<a class="code" href="classchrono_1_1_ch_assembly.html#ac45b72a2db1176dbed6731e904a18150">Add</a>(mparticles);</div><div class="line"></div><div class="line">    <span class="comment">//  ==Asset== Attach a &#39;sphere&#39; shape asset.. it will be used as a sample</span></div><div class="line">    <span class="comment">// shape to display all particles when rendering in 3D!</span></div><div class="line">    <span class="keyword">auto</span> mspherepart = std::make_shared&lt;ChSphereShape&gt;();</div><div class="line">    mspherepart-&gt;GetSphereGeometry().rad = 0.05;</div><div class="line">    mparticles-&gt;AddAsset(mspherepart);</div><div class="line"></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// SETUP THE POSTPROCESSING</span></div><div class="line">    <span class="comment">//</span></div><div class="line"></div><div class="line">    <span class="comment">// Create an exporter to POVray !!!</span></div><div class="line"></div><div class="line">    ChPovRay pov_exporter = ChPovRay(&amp;mphysicalSystem);</div><div class="line"></div><div class="line">    <span class="comment">// Sets some file names for in-out processes.</span></div><div class="line">    pov_exporter.SetTemplateFile(<a class="code" href="namespacechrono.html#a3bf1da4bd1bc011eeba49d5db828fd53">GetChronoDataFile</a>(<span class="stringliteral">&quot;_template_POV.pov&quot;</span>));</div><div class="line">    pov_exporter.SetOutputScriptFile(<span class="stringliteral">&quot;rendering_frames.pov&quot;</span>);</div><div class="line">    pov_exporter.SetOutputDataFilebase(<span class="stringliteral">&quot;my_state&quot;</span>);</div><div class="line">    pov_exporter.SetPictureFilebase(<span class="stringliteral">&quot;picture&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Even better: save the .dat files and the .bmp files</span></div><div class="line">    <span class="comment">// in two subdirectories, to avoid cluttering the current</span></div><div class="line">    <span class="comment">// directory...</span></div><div class="line">    <a class="code" href="classchrono_1_1_ch_fileutils.html#a2d6c3f774577cf3e4c774034901d495e">ChFileutils::MakeDirectory</a>(<span class="stringliteral">&quot;output&quot;</span>);</div><div class="line">    <a class="code" href="classchrono_1_1_ch_fileutils.html#a2d6c3f774577cf3e4c774034901d495e">ChFileutils::MakeDirectory</a>(<span class="stringliteral">&quot;anim&quot;</span>);</div><div class="line"></div><div class="line">    pov_exporter.SetOutputDataFilebase(<span class="stringliteral">&quot;output/my_state&quot;</span>);</div><div class="line">    pov_exporter.SetPictureFilebase(<span class="stringliteral">&quot;anim/picture&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// --Optional: modify default light</span></div><div class="line">    pov_exporter.SetLight(ChVector&lt;&gt;(-3, 4, 2), <a class="code" href="classchrono_1_1_ch_color.html">ChColor</a>(0.15f, 0.15f, 0.12f), <span class="keyword">false</span>);</div><div class="line"></div><div class="line">    <span class="comment">// --Optional: add further POV commands, for example in this case:</span></div><div class="line">    <span class="comment">//     create an area light for soft shadows</span></div><div class="line">    <span class="comment">//     create a Grid object; Grid() parameters: step, linewidth, linecolor, planecolor</span></div><div class="line">    <span class="comment">//   Remember to use \ at the end of each line for a multiple-line string.</span></div><div class="line">    pov_exporter.SetCustomPOVcommandsScript(</div><div class="line">        <span class="stringliteral">&quot; \</span></div><div class="line"><span class="stringliteral">        light_source {   \</span></div><div class="line"><span class="stringliteral">      &lt;2, 10, -3&gt;  \</span></div><div class="line"><span class="stringliteral">          color rgb&lt;1.2,1.2,1.2&gt; \</span></div><div class="line"><span class="stringliteral">      area_light &lt;4, 0, 0&gt;, &lt;0, 0, 4&gt;, 8, 8 \</span></div><div class="line"><span class="stringliteral">      adaptive 1 \</span></div><div class="line"><span class="stringliteral">      jitter\</span></div><div class="line"><span class="stringliteral">    } \</span></div><div class="line"><span class="stringliteral">        object{ Grid(1,0.02, rgb&lt;0.7,0.8,0.8&gt;, rgbt&lt;1,1,1,1&gt;) rotate &lt;0, 0, 90&gt;  } \</span></div><div class="line"><span class="stringliteral">    &quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// --Optional: attach additional custom POV commands to some of the rigid bodies,</span></div><div class="line">    <span class="comment">//   using the ChPovRayAssetCustom asset. This asset for example projects a</span></div><div class="line">    <span class="comment">//   checkered texture to the floor. This POV specific asset won&#39;t be rendered</span></div><div class="line">    <span class="comment">//   by Irrlicht or other interfaces.</span></div><div class="line">    <span class="keyword">auto</span> mPOVcustom = std::make_shared&lt;ChPovRayAssetCustom&gt;();</div><div class="line">    mPOVcustom-&gt;SetCommands((<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;pigment { checker rgb&lt;0.9,0.9,0.9&gt;, rgb&lt;0.75,0.8,0.8&gt; }&quot;</span>);</div><div class="line">    mfloor-&gt;AddAsset(mPOVcustom);</div><div class="line"></div><div class="line">    <span class="comment">// IMPORTANT! Tell to the POVray exporter that</span></div><div class="line">    <span class="comment">// he must take care of converting the shapes of</span></div><div class="line">    <span class="comment">// all items!</span></div><div class="line"></div><div class="line">    pov_exporter.AddAll();</div><div class="line"></div><div class="line">    <span class="comment">// (Optional: tell selectively which physical items you</span></div><div class="line">    <span class="comment">// want to render in the folllowing way...)</span></div><div class="line">    <span class="comment">//  pov_exporter.RemoveAll();</span></div><div class="line">    <span class="comment">//  pov_exporter.Add(mfloor);</span></div><div class="line">    <span class="comment">//  pov_exporter.Add(mbody);</span></div><div class="line">    <span class="comment">//  pov_exporter.Add(mparticles);</span></div><div class="line"></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// RUN THE SIMULATION AND SAVE THE POVray FILES AT EACH FRAME</span></div><div class="line">    <span class="comment">//</span></div><div class="line"></div><div class="line">    <span class="comment">// 1) Create the two .pov and .ini files for POV-Ray (this must be done</span></div><div class="line">    <span class="comment">//    only once at the beginning of the simulation).</span></div><div class="line"></div><div class="line">    pov_exporter.ExportScript();</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (mphysicalSystem.<a class="code" href="classchrono_1_1_ch_obj.html#a16b228cfd939fa5d7417bca15c4e54b6">GetChTime</a>() &lt; 1.5) {</div><div class="line">        mphysicalSystem.<a class="code" href="classchrono_1_1_ch_system.html#a552f40a0951fa8dc3c1e00900fd3b48c">DoStepDynamics</a>(0.01);</div><div class="line"></div><div class="line">        <a class="code" href="namespacechrono.html#a4fba60cf9a29db628ad96a88b60b4e00">GetLog</a>() &lt;&lt; <span class="stringliteral">&quot;time= &quot;</span> &lt;&lt; mphysicalSystem.<a class="code" href="classchrono_1_1_ch_obj.html#a16b228cfd939fa5d7417bca15c4e54b6">GetChTime</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">        <span class="comment">// 2) Create the incremental nnnn.dat and nnnn.pov files that will be load</span></div><div class="line">        <span class="comment">//    by the pov .ini script in POV-Ray (do this at each simulation timestep)</span></div><div class="line">        pov_exporter.ExportData();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// That&#39;s all! If all worked ok, this python script should</span></div><div class="line">    <span class="comment">// have created a  &quot;rendering_frames.pov.ini&quot;  file that you can</span></div><div class="line">    <span class="comment">// load in POV-Ray, then when you press &#39;RUN&#39; you will see that</span></div><div class="line">    <span class="comment">// POV-Ray will start rendering a short animation, saving the frames</span></div><div class="line">    <span class="comment">// in the directory &#39;anim&#39;.</span></div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 1 2016 15:43:12 for Project Chrono by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11 . <a href="mailto:info@projectchrono.org">Contact us</a> for issues related to this page. 
</small></address>
</body>
</html>
