<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- For Mobile Devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta name="generator" content="Doxygen 1.8.11"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Exo+2:400,200,700' type='text/css'>
    <title>Project Chrono: Chrono::PyEngine reference</title>
    <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
    <link href="main.css" rel="stylesheet" type="text/css" />
    <!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="doxy-boot.js"></script>
    <script type="text/javascript" src="bootstrap-hover-dropdown.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://projectchrono.org">
            <span class="logo first">PROJECT</span><span class="logo second">CHRONO</span>
        </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="http://projectchrono.org/download">Download</a></li>
        <li class="dropdown">
            <a href="http://api.chrono.projectchrono.org" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" aria-haspopup="true" aria-expanded="false">Documentation <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://api.chrono.projectchrono.org/faq_root.html">FAQ</a></li>
                <li><a href="http://api.chrono.projectchrono.org/tutorial_table_of_content_install.html">Install Guide</a></li>
                <li><a href="http://api.chrono.projectchrono.org/tutorial_root.html">Examples/Tutorials</a></li>
                <li><a href="http://api.chrono.projectchrono.org/model_root.html">Model Library</a></li>
                <li><a href="http://api.chrono.projectchrono.org/validation_studies_root.html">Validation Studies</a></li>
                <li><a href="http://api.chrono.projectchrono.org/whitepaper_root.html">White Papers</a></li>
                <li><a href="http://projectchrono.org/docpdf">PDF Version</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a href="http://projectchrono.org/gallery/" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" style="dropdown:hover" aria-haspopup="true" aria-expanded="false">Movies <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://projectchrono.org/gallery/">Gallery</a></li>
                <li><a href="http://sbel.wisc.edu/Animations/">SBEL</a></li>
                <li><a href="https://vimeo.com/uwsbel">On Vimeo</a></li>
            </ul>
        </li>
        <li><a href="http://projectchrono.org/news/">News</a></li>
        <li><a href="http://projectchrono.org/forum">Forum</a></li>
		<li class="dropdown">
            <a href="http://projectchrono.org/about/" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://projectchrono.org/about/">What is ProjectChrono</a></li>
                <li><a href="http://projectchrono.org/testimonials/">Users</a></li>
            </ul>
        </li>
        <li><a href="http://projectchrono.org/status">Status</a></li>            
            <li>
              <form method="get" action="http://projectchrono.org/search" id="search_bar_triggered">
                          <input type="submit" value="Search">
                <input type="text" id="search_bar" name="query" value="" />
              </form> 
            </li>
    </ul>
          <!-- <ul class="nav navbar-nav navbar-right">
      </ul> -->
  </div><!--/.navbar-collapse -->
</div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
                    <div style="margin-bottom: 15px;">
                        <!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Project Chrono API/SDK documentation</a></li><li class="navelem"><a class="el" href="manual_root.html">Reference Manual</a></li><li class="navelem"><a class="el" href="introduction_chrono_pyengine.html">Chrono::PyEngine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Chrono::PyEngine reference </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Chrono::PyEngine is a Python wrapper for Chrono::Engine. It is a set of Python modules that correspond to the main units of Chrono::Engine, as shown in this scheme:</p>
<div class="image">
<img src="Units_python.png" alt="Units_python.png"/>
</div>
<h2>First steps with Python </h2>
<p>After the <a class="el" href="chrono_pyengine_installation.html">installation</a>, you are ready to use Chrono::PyEngine from Python. To begin:</p>
<ul>
<li>start your editor, for example PyScripter.</li>
<li>create a new blank Python script file, for example 'test.py'</li>
</ul>
<p>Now you can type Python programs in this new Python file, execute it, save it on disk, etc.</p>
<p>Let's see a first program.</p>
<ul>
<li>First of all, you should use the <b>import</b> keyword to specify which Python modules must be load and used in your program. Most of the core functionalities of Chrono::Engine are in a module called <b>ChronoEngine_PYTHON_core</b>, hence write:</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">import</span> ChronoEngine_PYTHON_core <span class="keyword">as</span> chrono</div></div><!-- fragment --><p>Note that the <em>as chrono</em> is optional: but if you avoid it you must call all Chrono::Engine functions using the long syntax ChronoEngine_PYTHON_core.ChClassFoo..., whereas if you use <em>as chrono</em> you simply rename the namespace and you can type more shortly: chrono.ChClassFoo...</p>
<ul>
<li>Let's create a 3D vector object:</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_vect1 = chrono.ChVectorD()</div></div><!-- fragment --><p>(Note that all PyChrono::Engine classes are prefixed by the <em>chrono</em> word).</p>
<ul>
<li>Modify the properties of that vector object; this is done using the **.** dot operator:</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_vect1.x=5</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;my_vect1.y=2</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;my_vect1.z=3</div></div><!-- fragment --><ul>
<li>Some classes have build parameters, for example anothe vector can be built by passing the 3 coordinates for quick initialization:</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_vect2 = chrono.ChVectorD(3,4,5)</div></div><!-- fragment --><ul>
<li>Most operator-overloading features that are available in C++ for the Chrono::Engine vectors and matrices are also available in Python, for example:</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_vect4 = my_vect1*10 + my_vect2</div></div><!-- fragment --><ul>
<li>Member functions of an object can be called simply using the **.** dot operator, just like in C++:</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_len = my_vect4.Length()</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keywordflow">print</span> (<span class="stringliteral">&#39;vector length =&#39;</span>, my_len)</div></div><!-- fragment --><ul>
<li>You can use most of the classes that you would use in C++, for example let's play with quaternions and matrices:</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_quat = chrono.ChQuaternionD(1,2,3,4)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;my_qconjugate = ~my_quat</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keywordflow">print</span> (<span class="stringliteral">&#39;quat. conjugate  =&#39;</span>, my_qconjugate)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keywordflow">print</span> (<span class="stringliteral">&#39;quat. dot product=&#39;</span>, my_qconjugate ^ my_quat)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keywordflow">print</span> (<span class="stringliteral">&#39;quat. product=&#39;</span>,     my_qconjugate % my_quat)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;ma = chrono.ChMatrixDynamicD(4,4)</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;ma.FillDiag(-2)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;mb = chrono.ChMatrixDynamicD(4,4)</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;mb.FillElem(10)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;mc = (ma-mb)*0.1;   <span class="comment"># operator overloading of +,-,* is supported</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keywordflow">print</span> (mc);</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;mr = chrono.ChMatrix33D()</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;mr.FillDiag(20)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keywordflow">print</span>  (mr*my_vect1);</div></div><!-- fragment --><ul>
<li>If you want to know the list of methods and/or properties that are available in a class, you can simply use the code completion feature of PyScripter: for example once you type <em>chrono.</em> you will see a pop-up window with a list of available classes, constants, etc.</li>
</ul>
<div class="ce-info"> Learn additional lessons by reading the PyChrono::Engine tutorials. </div><div class="ce-info"> Most classes behave like their C++ counterparts, so you are invited to look at the <a href="http://api.chrono.projectchrono.org">C++ API documentation</a> to understand their features. </div><div class="ce-warning"> There are also few but important differences between C++ and Python that are worth mentioning, so read also the following section! </div><h2>Differences between Python and C++ </h2>
<p>Not all the functionalities of the C++ API can be mapped 1:1 to the Python API, of course. Python is an interpreted language that differs from C++ for many reasons, so there are some differences and limitations, but also advantages. If you already used the C++ API of Chrono::Engine, you will find that this documentation is useful for easily jumping into the PyChrono::Engine development.</p>
<h3>Object creation</h3>
<p>In C++ you can create objects in two ways: on the stack and on the heap (the latter is used for <em>dynamic allocation</em>). For example, respectively, this is <b>object creation in C++ language</b></p>
<div class="fragment"><div class="line"><a class="code" href="classchrono_1_1_ch_system.html">chrono::ChSystem</a>  my_system;  <span class="comment">// on stack, or..</span></div><div class="line"><a class="code" href="classchrono_1_1_ch_system.html">chrono::ChSystem</a>* my_system_pointer = <span class="keyword">new</span> <a class="code" href="classchrono_1_1_ch_system.html">chrono::ChSystem</a>();  <span class="comment">// on heap </span></div></div><!-- fragment --><p>In the second case, in C++ you must remember to deallocate the object with <em>delete (my_system_pointer)</em> soon or later. In Python, object creation is always done in a single way: <em>objectname = namespace.classname()</em> , and it does not require that you remember to delete an object, because the lifetime of an object is automatically managed by Python. So <b>object creation in Python</b> is simply:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_vect = <a class="code" href="classchrono_1_1_ch_system.html">chrono.ChSystem</a>()</div></div><!-- fragment --><p>Note that the = operator in Python does not mean <em>copy</em> (except for simple types such as integers, floats, etc.) but means <em>assign</em>, so for example</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_systemA = <a class="code" href="classchrono_1_1_ch_system.html">chrono.ChSystem</a>()</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;my_systemB = my_systemA      <span class="comment"># assign another handle to the same system</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;my_systemA.SetTol(2)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keywordflow">print</span> (my_systemB.GetTol())</div></div><!-- fragment --><p>will output 2, because you created a single ChSystem object, with two handles pointing to it.</p>
<h3>Templated classes</h3>
<p>Currently there is no support for templated clases in Python. On the other side, there are some templated classes in the C++ API of Chrono::Engine, expecially for vectors, matrices, etc., because in C++ you might want to create vectors of floats, or doubles, or integers, etc. by using the &lt;&gt; syntax, as:</p>
<div class="fragment"><div class="line">ChVector&lt;float&gt; my_vect;    <span class="comment">// vector of floats</span></div><div class="line">ChVector&lt;double&gt; my_vect;   <span class="comment">// vector of double precision floats</span></div><div class="line">ChVector&lt;int&gt; my_vect;      <span class="comment">// vector of integers</span></div><div class="line">ChVector&lt;&gt; my_vect;         <span class="comment">// default: as ChVector&lt;double&gt;</span></div><div class="line">ChQuaternion&lt;float&gt; my_vect;    <span class="comment">// quaternion of floats</span></div><div class="line">ChQuaternion&lt;double&gt; my_vect;   <span class="comment">// quaternion of double precision floats</span></div><div class="line">...                             <span class="comment">// etc.</span></div></div><!-- fragment --><p>In PyChrono::Engine, we simply decided to support only the <code>&lt;double&gt;</code> templated versions, that are used most of the times. Templated classes are renamed by appending a <b>D</b> at the end (to remember that they represent the <code>&lt;double&gt;</code> templated versions). In detail, this is a list of the Python classes that are equivalent to C++ templated classes:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;chrono.ChVectorD          <span class="comment"># as ChVector&lt;double&gt;  in c++</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;chrono.ChQuaternionD      <span class="comment"># as ChQuaternion&lt;double&gt;  in c++</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;chrono.ChMatrix33D        <span class="comment"># as ChMatrix33&lt;double&gt;  in c++</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;chrono.ChMatrixNMD        <span class="comment"># as ChMatrixNM&lt;double&gt;  in c++</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;chrono.ChMatrixDynamicD   <span class="comment"># as ChMatrixDynamic&lt;double&gt;  in c++</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;chrono.ChMatrixD          <span class="comment"># as ChMatrix&lt;double&gt;  in c++</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;chrono.ChFrameD           <span class="comment"># as ChFrame&lt;double&gt;  in c++</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;chrono.ChFrameMovingD     <span class="comment"># as ChFrameMoving&lt;double&gt;  in c++</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;chrono.ChCoordsysD        <span class="comment"># as ChCoordsys&lt;double&gt;  in c++</span></div></div><!-- fragment --><h3>Shared pointers</h3>
<p>Except for vectors, matrices, etc., most of the complex objects that you create with the Chrono::Engine API are managed via C++ shared pointers. This is the case of ChBody parts, ChLink constraints, etc. Shared pointers are a C++ technology that allows the user to create objects and do not worry about deletion, because deletion is managed automatically. In the Chrono::Engine C++ API such shared pointers are based on templates; as we said previously templates are not supported in Python, but this is not an issue, because Chrono::PyEngine <b>automatically handle objects with shared pointers if necessary</b> PyChrono::Engine.</p>
<p>This is an example of **shared pointers in C++** :</p>
<div class="fragment"><div class="line">std::shared_ptr&lt;ChLinkLockRevolute&gt;  my_link_BC(<span class="keyword">new</span> ChLinkLockRevolute);</div></div><!-- fragment --><p>This is the equivalent syntax <b>in Python</b> :</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_link_BC = <a class="code" href="classchrono_1_1_ch_link_lock_revolute.html">chrono.ChLinkLockRevolute</a>()</div></div><!-- fragment --><div class="ce-info"> When you create a shared pointer object in PyChrono::Engine, also the referenced object is created. For instance, in the last example, a revolute joint is created at the same line. If you need other shared pointers to the same object, simply type <code>my_link_other = my_link_BC</code> etc. </div><h2>Downcasting and upcasting </h2>
<h4>Upcasting</h4>
<p>Upcasting of derived classes to the base class works <b>automatically</b> in Python and does not require intervention. We managed to do this also for shared pointers. For example <em>ChSystem.Add()</em> requires a (shared)pointer to a <em>ChPhysicsItem</em> object, that is a base class, but you can pass it a <em>ChBody</em>, a <em>ChLinkGears</em>, etc. that are derived classes. The same in Python.</p>
<h4>Downcasting</h4>
<p>A bigger problem is the downcasting of base classes to derived classes. That is, if a function <em>returns</em> a pointer to a base class, how to understand that a specific returned object belongs to a derived class? At the time of writing, an automatic downcasting is performed only for classes inherited from ChFunction and ChAsset. Otherwise, one has to perform manual downcasting using the CastToXXXYYYZZZ() helper functions; this is a bit similar to the <code>dynamic_cast&lt;derived&gt;(base)</code> method in C++. Currently such casting functions are provided for almost all shared pointers. Use this in Python as in the following example:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;myvis = chrono.CastToChVisualizationShared(myasset)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keywordflow">print</span> (<span class="stringliteral">&#39;Could be cast to visualization object?&#39;</span>, !myvis.IsNull())</div></div><!-- fragment --><h3>Not supported classes</h3>
<p>We managed to map in Python most of the C++ classes of common interest, but maybe that there are still some classes or functions that are not yet mapped to Python. This can be understood in the following way. Functions that are correctly mapped will return objects whose type is echoed in the interpreter window as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_system.Get_G_acc()</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;&lt;ChronoEngine_PYTHON_core.ChVectorD; </div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;proxy of &lt;Swig Object of type <span class="stringliteral">&#39;chrono::ChVector&lt; double &gt; *&#39;</span> at 0x03EDCEA8&gt; &gt;</div></div><!-- fragment --><p>A function that is not yet mapped, for instance ChSystem.GetSystemDescriptor(), will give a shorter echo, that represents the type information for a pointer to an object that is unusable in Python:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;my_system.GetSystemDescriptor()</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;&lt;Swig Object of type <span class="stringliteral">&#39;chrono::ChSystemDescriptor *&#39;</span> at 0x03EDD800&gt;</div></div><!-- fragment --><div class="ce-info"> As the development of PyChrono::Engine proceeds, the latter case will happen less an less frequently. Tell us if you encounter this type of problem in some function, so we can fix it. </div><h2>Demos and examples </h2>
<p>You can find examples of use in <a class="el" href="tutorial_table_of_content_chrono_pyengine.html">these tutorials</a> </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 1 2016 15:43:09 for Project Chrono by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11 . <a href="mailto:info@projectchrono.org">Contact us</a> for issues related to this page. 
</small></address>
</body>
</html>
