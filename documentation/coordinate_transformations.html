<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- For Mobile Devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta name="generator" content="Doxygen 1.8.11"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Exo+2:400,200,700' type='text/css'>
    <title>Project Chrono: Coordinate transformations</title>
    <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
    <link href="main.css" rel="stylesheet" type="text/css" />
    <!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="doxy-boot.js"></script>
    <script type="text/javascript" src="bootstrap-hover-dropdown.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://projectchrono.org">
            <span class="logo first">PROJECT</span><span class="logo second">CHRONO</span>
        </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="http://projectchrono.org/download">Download</a></li>
        <li class="dropdown">
            <a href="http://api.chrono.projectchrono.org" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" aria-haspopup="true" aria-expanded="false">Documentation <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://api.chrono.projectchrono.org/faq_root.html">FAQ</a></li>
                <li><a href="http://api.chrono.projectchrono.org/tutorial_table_of_content_install.html">Install Guide</a></li>
                <li><a href="http://api.chrono.projectchrono.org/tutorial_root.html">Examples/Tutorials</a></li>
                <li><a href="http://api.chrono.projectchrono.org/model_root.html">Model Library</a></li>
                <li><a href="http://api.chrono.projectchrono.org/validation_studies_root.html">Validation Studies</a></li>
                <li><a href="http://api.chrono.projectchrono.org/whitepaper_root.html">White Papers</a></li>
                <li><a href="http://projectchrono.org/docpdf">PDF Version</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a href="http://projectchrono.org/gallery/" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" style="dropdown:hover" aria-haspopup="true" aria-expanded="false">Movies <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://projectchrono.org/gallery/">Gallery</a></li>
                <li><a href="http://sbel.wisc.edu/Animations/">SBEL</a></li>
                <li><a href="https://vimeo.com/uwsbel">On Vimeo</a></li>
            </ul>
        </li>
        <li><a href="http://projectchrono.org/news/">News</a></li>
        <li><a href="http://projectchrono.org/forum">Forum</a></li>
		<li class="dropdown">
            <a href="http://projectchrono.org/about/" class="dropdown-toggle disabled" data-hover="dropdown" data-toggle="dropdown" data-delay="100" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://projectchrono.org/about/">What is ProjectChrono</a></li>
                <li><a href="http://projectchrono.org/testimonials/">Users</a></li>
            </ul>
        </li>
        <li><a href="http://projectchrono.org/status">Status</a></li>            
            <li>
              <form method="get" action="http://projectchrono.org/search" id="search_bar_triggered">
                          <input type="submit" value="Search">
                <input type="text" id="search_bar" name="query" value="" />
              </form> 
            </li>
    </ul>
          <!-- <ul class="nav navbar-nav navbar-right">
      </ul> -->
  </div><!--/.navbar-collapse -->
</div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
                    <div style="margin-bottom: 15px;">
                        <!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Project Chrono API/SDK documentation</a></li><li class="navelem"><a class="el" href="manual_root.html">Reference Manual</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Coordinate transformations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This documentation component introduces important concepts used through the entire Chrono API for managing coordinates, points, transformations and rotations.</p>
<h1><a class="anchor" id="manual_ChVector"></a>
Vectors</h1>
<p>Vectors that represent 3D points in space are defined by means of the <a class="el" href="classchrono_1_1_ch_vector.html">chrono::ChVector</a> class. In mathematical notation:</p>
<p class="formulaDsp">
\[ \mathbf{p}=\{p_x,p_y,p_z\} \]
</p>
<p>The ChVector&lt;&gt; class is templated. One can have vectors with single precision, as <a class="el" href="classchrono_1_1_ch_vector.html">ChVector&lt;float&gt;</a>, with double precision, as <a class="el" href="classchrono_1_1_ch_vector.html">ChVector&lt;double&gt;</a>, etc. The default data type is double precision; i.e., ChVector&lt;&gt; defaults to <a class="el" href="classchrono_1_1_ch_vector.html">ChVector&lt;double&gt;</a>.</p>
<p>Example, creating a vector:</p>
<div class="fragment"><div class="line">ChVector&lt;&gt; mvect1(2,3,4);</div></div><!-- fragment --><p> Add, subtract, multiply vectors, using +,-,* operators.</p>
<div class="fragment"><div class="line">ChVector&lt;double&gt; mvect1(2,3,4);  <span class="comment">// Create a vector with given the 2,3,4 ‘double’ components</span></div><div class="line"></div><div class="line">ChVector&lt;float&gt; mvect2(4,1,2);  <span class="comment">// Create a vector with given the 4,1,2 ‘float’ components</span></div><div class="line"></div><div class="line">ChVector&lt;&gt; mvect3();    <span class="comment">// Create a 0,0,0, vector. The &lt;&gt; defaults to ‘double’</span></div><div class="line"></div><div class="line">ChVector&lt;&gt; mvect4(mvect1 + mvect2);      <span class="comment">// Create a vector by copying another (a result from +)</span></div><div class="line"></div><div class="line">mvect3 = mvect1 + mvect2;       <span class="comment">// Vector operators: +, - </span></div><div class="line"></div><div class="line">mvect3 += mvect1;               <span class="comment">// In-place operators</span></div><div class="line"></div><div class="line">mvect3 = mvect2 * 0.003;        <span class="comment">// Vector product by scalar</span></div><div class="line"></div><div class="line">mvect3.Normalize();             <span class="comment">// One of many member functions, normalizes a vector</span></div><div class="line"></div><div class="line">mvect3 = mvect1 % mvect2;       <span class="comment">// Operator for cross product: A%B means vector cross-product AxB</span></div><div class="line"></div><div class="line"><span class="keywordtype">double</span> val = mvect1 ^ mvect2;   <span class="comment">// Operator for inner product (scalar product)</span></div></div><!-- fragment --><h1><a class="anchor" id="manual_ChQuaternion"></a>
Quaternions</h1>
<p>Quaternions, which provide a number system that extends complex numbers, are used is Chrono to represent rotations in 3D space. The Chrono implementation of quaternions is encapsulated in the <a class="el" href="classchrono_1_1_ch_quaternion.html">chrono::ChQuaternion</a> class. In mathematical notation, a quaternion is represented as a set of four real numbers:</p>
<p class="formulaDsp">
\[ \mathbf{q}=\{q_0,q_1,q_2,q_3\} \]
</p>
<p>Quaternion algebra properties:</p>
<ul>
<li>A real unit quaternion \( \mathbf{q}=\{1,0,0,0\} \) represents no rotation</li>
<li><p class="startli">Given a rotation \( \theta_{u} \) about a generic unit vector \( \mathbf{u} \), the corresponding quaternion is</p>
<p class="formulaDsp">
\[ \mathbf{q}=\left\{ \begin{array}{c} \cos(\alpha_u / 2)\\ {u}_x \sin(\theta_u / 2)\\ {u}_y \sin(\theta_u / 2)\\ {u}_z \sin(\theta_u / 2) \end{array} \right\} \]
</p>
</li>
</ul>
<div class="image">
<img src="coord_quaternions.png" alt="coord_quaternions.png"/>
</div>
<p>Only quaternions with unit norm represent valid rotations. Quaternions can be built in different ways.</p>
<p>Examples of building an equivalent quaternion that represents no rotation:</p>
<div class="fragment"><div class="line">ChQuaternion&lt;&gt; qA(1,0,0,0);</div><div class="line">ChQuaternion&lt;&gt; qB(QUNIT);</div><div class="line">ChQuaternion&lt;&gt; qC = QUNIT;</div></div><!-- fragment --><p>The quaternion as a function of a rotation \( \theta_{u} \) about a generic unit vector \( \mathbf{u} \) can be build with:</p>
<div class="fragment"><div class="line">ChQuaternion&lt;&gt; qA = Q_from_AngAxis(theta, u);</div></div><!-- fragment --><p>The rotation of a point by a quaternion can be done easily by using the .Rotate() member function of quaternions. The example below shows how to rotate a point 20 degrees about y-axis:</p>
<div class="fragment"><div class="line">ChVector vA(1,2,3);</div><div class="line">ChVector vB();</div><div class="line">ChQuaternion qA = Q_from_AngAxis(20 * CH_C_DEG_TO_RAD, VECT_Y);</div><div class="line">vB = qA.Rotate(vA);</div></div><!-- fragment --><p>The * operator is used to perform a quaternion product. From a kinematic perspective, this represents concatenation of rotations.</p>
<p>Example: a rotation qc followed by a rotation qb can be shortened in a single qa, if qa, qb, and qc are quaternions, as follows:</p>
<div class="fragment"><div class="line">qa = qb * qc;      <span class="comment">// Concatenate two rotations, first qc, followed by qb</span></div><div class="line">qa.Rotate(mvect1); </div></div><!-- fragment --><p>Alternatively, the &gt;&gt; operator concatenates from left to right:</p>
<div class="fragment"><div class="line">qa = qc &gt;&gt; qb;     <span class="comment">// Concatenate two rotations, first qc, followed by qb  </span></div><div class="line">qa.Rotate(mvect1); <span class="comment">// (Same result as example before)</span></div></div><!-- fragment --><h1><a class="anchor" id="manual_ChMatrix33"></a>
Rotation matrices</h1>
<p>A rotation matrix \( \mathbf{A} \) is used in Chrono to characterize the 3D orientation of a reference frame with respect to a different reference frame. Most of the implementation support related to the concept of rotation matrix is encapsulated in <a class="el" href="classchrono_1_1_ch_matrix33.html">chrono::ChMatrix33</a>. There are Chrono functions that given a quaternion produce a 3x3 orientation matrix \( \mathbf{q} \mapsto \mathbf{A} \) and viceversa \( \mathbf{A} \mapsto \mathbf{q} \). Note that a rotation matrix is an orthnormal matrix, \( \mathbf{A} \in \mathsf{SO}(3) \). Therefore, \( \mathbf{A}^{-1} = \mathbf{A}^{t} \)</p>
<p>Creating a rotation matrix:</p>
<div class="fragment"><div class="line">ChMatrix33&lt;&gt; mB(1);  <span class="comment">// Unit matrix, this is a rotation matrix, meaning no rotation</span></div><div class="line">ChMatrix33&lt;&gt; mC(quat); <span class="comment">// Build a rotation matrix from a given quaternion</span></div></div><!-- fragment --><p>The * operator can multiply two rotation matrices, for instance a rotation mA followed by a rotation mB becomes:</p>
<div class="fragment"><div class="line">ChMatrix33&lt;&gt; mC = mB * mA;</div></div><!-- fragment --><p>The * operator can multiply a ChVector&lt;&gt;, this corresponds to rotating the vector:</p>
<div class="fragment"><div class="line">ChVector&lt;&gt; vB = m * vA;</div></div><!-- fragment --><p>The inverse rotation is the inverse of the matrix, which is also the transpose.</p>
<h1><a class="anchor" id="manual_ChCoordsys"></a>
ChCoordsys</h1>
<p>A <a class="el" href="classchrono_1_1_ch_coordsys.html">chrono::ChCoordsys</a> represents a coordinate system in 3D space. It embeds both a vector (coordinate translation \( \mathbf{d} \) ) and a quaternion (coordinate rotation \( \mathbf{q} \) ):</p>
<p class="formulaDsp">
\[ \mathbf{c}=\{\mathbf{d},\mathbf{q}\} \]
</p>
<p>The ChCoordys is a lightweight version of a ChFrame, which is discussed next.</p>
<h1><a class="anchor" id="manual_ChFrame"></a>
ChFrame</h1>
<p>A <a class="el" href="classchrono_1_1_ch_frame.html">chrono::ChFrame</a> represents a coordinate system in 3D space like ChCoordsys but includes more advanced features.</p>
<div class="image">
<img src="coord_frame.png" alt="coord_frame.png"/>
</div>
<p>As shown in the picture above, a ChFrame object indicates how "rotated" and "displaced" a coordinate system <b>b</b> is with respect to another coordinate system <b>a</b> Many time <b>a</b> is the absolute reference frame.</p>
<div class="ce-info"> In what follows the notation <p class="formulaDsp">
\[ \mathbf{d}_{a,b(c)} \]
</p>
 is used to define a vector \( \mathbf{d} \) ending in point \( a \), starting from point \( b \), expressed in the base \( c \) (that is, <em>measured</em> along the x,y,z axes of the coordinate system \( c \) ). If \( b \) is omitted, it is assumed to be the origin of the absolute reference frame. </div><p>As a ChCoordsys, a ChFrame object has a vector for the translation and a quaternion for the rotation:</p>
<p class="formulaDsp">
\[ \mathbf{c}=\{\mathbf{d},\mathbf{q}\} \]
</p>
<p>As an alternative to the quaternion a ChFrame object also stores an auxiliary 3x3 rotation matrix that can be used to speed up computations where quaternions would be less efficient.</p>
<p>ChCoordsys can be considered as a lightweight version of ChFrame. To save memory or if advanced features are not needed, ChCoordsys&lt;&gt; can be a better choice.</p>
<p>There are several ways to build a ChFrame. For instance:</p>
<div class="fragment"><div class="line">ChFrame&lt;&gt; Xa;          <span class="comment">// build default frame: zero translation, no rotation</span></div><div class="line">ChFrame&lt;&gt; Xb(va, qa);  <span class="comment">// build from given translation va and rotation quaternion qa</span></div><div class="line">ChFrame&lt;&gt; Xc(csys);    <span class="comment">// build from a given ChCoordys&lt;&gt;</span></div><div class="line">ChFrame&lt;&gt; Xd(va, tetha, u); <span class="comment">// build from translation va and rotation theta about axis u</span></div></div><!-- fragment --><p>One of the most important features of a ChFrame object is the ability to transform points and other ChFrame objects.</p>
<p>Example: Transforming a point from a local coordinate system <b>b</b> to the absolute coordinate system <b>a</b>:</p>
<div class="image">
<img src="coord_trasf1_point.png" alt="coord_trasf1_point.png"/>
</div>
<p>Usually an affine transformation involving rotation by a matrix A and a translation is used:</p>
<p class="formulaDsp">
\[ \mathbf{d}_{P,a(a)}=\mathbf{d}_{b,a(a)} + \mathbf{A}_{ba} \mathbf{d}_{P,b(b)} \]
</p>
<p>This can be done in Chrono as follows:</p>
<div class="fragment"><div class="line">ChVector&lt;&gt; d_Paa, d_baa, d_Pbb;</div><div class="line">ChMatrix33&lt;&gt; A_ba;</div><div class="line">...</div><div class="line">d_Paa = d_baa + A_ba * d_Pbb;</div></div><!-- fragment --><p>However, the ChFrame&lt;&gt; class makes this simpler:</p>
<div class="fragment"><div class="line">ChVector&lt;&gt; d_Paa, d_Pbb;</div><div class="line">ChFrame&lt;&gt; X_ba;</div><div class="line">...</div><div class="line">d_Paa = X_ba * d_Pbb;</div></div><!-- fragment --><p>The same concept can be used to chain coordinate transformations. For instance, if the transformation from a frame <b>c</b> to <b>b</b> and from <b>b</b> to <b>a</b> is known, then the total frame rotation and displacement can be found.</p>
<div class="image">
<img src="coord_trasf2_frame.png" alt="coord_trasf2_frame.png"/>
</div>
<div class="fragment"><div class="line">ChFrame&lt;&gt; X_ba, X_cb, X_ca;</div><div class="line">...</div><div class="line">X_ca = X_ba * X_cb;</div></div><!-- fragment --><p>This translates into working with a less complex representation. Symbols are recycled to emphasize that the latter formalism has the same meaning insofar using the displacements and quaternions:</p>
<div class="image">
<img src="coord_trasf3_frame.png" alt="coord_trasf3_frame.png"/>
</div>
<p>The transformation above can be expressed with an alternative operator &gt;&gt;, whose operands are swapped with respect to the * operator:</p>
<div class="fragment"><div class="line">ChFrame&lt;&gt; X_ba, X_cb, X_ca;</div><div class="line">...</div><div class="line">X_ca = X_cb &gt;&gt; X_ba;     <span class="comment">// equivalent to   X_ca = X_ba * X_cb;</span></div></div><!-- fragment --><div class="ce-info"> In Chrono, most of the transformation between ChCorrdsys&lt;&gt; and ChFrame and ChFrameMoving (which is defined below) can be expressed in two equivalent ways: <br />
 ... using the * operator <em>RIGHT TO LEFT</em> transformations, as in: <code>X_ca = X_ba * X_cb</code> <br />
 ... using the &gt;&gt; operator <em>LEFT TO RIGHT</em> transformations, as in: <code>X_ca = X_cb &gt;&gt; X_ba</code> <br />
 </div><div class="ce-info"> The latter has some advantages: <br />
 ... it is more 'intuitive' (see how the subscripts cb-ba follow a 'chain') <br />
 ... if the first operand is a vector, as in <code>vnew = v &gt;&gt; X_dc &gt;&gt; X_cb &gt;&gt; X_ba</code>, <br />
 The default behavior of the compiler is to perform operations from the left, leading to a sequence of matrix-by-ChFrame operations returning temporary vectors. Otherwise, the * operator would create several ChFrame&lt;&gt; temporary objects, which would be slower. </div><p>One can also use the * or &gt;&gt; operators with other objects, for example using &gt;&gt; between a ChFrame Xa and a ChVector vb. The outcome of this operation is a new ChFrame object obtained by translating the old one by a vector vb:</p>
<div class="fragment"><div class="line">ChVector&lt;&gt; vb;</div><div class="line">ChFrame&lt;&gt; Xa, Xt; ...</div><div class="line">Xt = Xa &gt;&gt; vb;    <span class="comment">// also  Xt = vb * Xa;</span></div></div><!-- fragment --><p>The same holds for in-place operators *= or &gt;&gt;=, which can be used to translate or to rotate a ChFrame, or to transform entirely, depending on how it is used: with a ChVector or a ChQuaternion or another ChFrame. For example, to translate Xa by vector vb one writes:</p>
<div class="fragment"><div class="line">Xa &gt;&gt;= vb;    </div></div><!-- fragment --><p>Note that while the operators * and &gt;&gt; create temporary objects, that is not the case with *= or &gt;&gt;=, which leads to improved efficiency. In this context, a rule of thumb is to avoid:</p><ul>
<li>Operators * and &gt;&gt;</li>
<li>Use of low-level functions such as TransformLocalToParent, TransformParentToLocal, etc.</li>
</ul>
<p>Both the * and &gt;&gt; operations support an inverse transformation. Example: in the relation X_ca = X_cb &gt;&gt; X_ba; supposed that X_ca and X_cb are known and one is interested in computing X_ba. Pre-multiplying both sides of the equation by the inverse of X_cb yields</p>
<div class="fragment"><div class="line">X_ba = X_cb.GetInverse() &gt;&gt; X_ca;    </div></div><!-- fragment --><p>Note that the GetInverse operation might be less efficient than the less readable low-level methods, in this case TransformParentToLocal(), that is:</p>
<div class="fragment"><div class="line">X_ba = X_cb.TransformParentToLocal(X_ca);    </div></div><!-- fragment --><p>See <a class="el" href="classchrono_1_1_ch_frame.html">chrono::ChFrame</a> for API details.</p>
<h1><a class="anchor" id="manual_ChFrameMoving"></a>
ChFrameMoving</h1>
<p>The <a class="el" href="classchrono_1_1_ch_frame_moving.html">chrono::ChFrameMoving</a> object represents a coordinate system in 3D space, like a ChFrame, but it stores also information about the velocity and accelerations of the frame:</p>
<p class="formulaDsp">
\[ \mathbf{c}=\{\mathbf{p},\mathbf{q},\dot{\mathbf{p}}, \dot{\mathbf{q}}, \ddot{\mathbf{p}}, \ddot{\mathbf{q}} \} \]
</p>
<p>Note that using quaternion derivatives to express angular velocity and angular acceleration can be cumbersome. Therefore, this class also has the possibility of setting and getting such data in terms of angular velocity \( \mathbf{\omega} \) and of angular acceleration \( \mathbf{\alpha} \) :</p>
<p class="formulaDsp">
\[ \mathbf{c}=\{\mathbf{p},\mathbf{q},\dot{\mathbf{p}}, \mathbf{\omega}, \ddot{\mathbf{p}}, \mathbf{\alpha}\} \]
</p>
<p>This can be shown intuitively with the following picture:</p>
<div class="image">
<img src="coord_framemoving.png" alt="coord_framemoving.png"/>
</div>
<p>Note that 'angular' velocities and accelerations can be set/get both in the basis of the moving frame or in the absolute frame.</p>
<p>Example: A ChFrameMoving is created and assigned a non-zero angular velocity and linear velocity, also linear and angular accelerations are assigned.</p>
<div class="fragment"><div class="line">ChFrameMoving&lt;&gt; X_ba;</div><div class="line">X_ba.SetPos(ChVector&lt;&gt;(2,3,5));</div><div class="line">X_ba.SetRot(myquaternion);</div><div class="line"></div><div class="line"><span class="comment">// set velocity </span></div><div class="line">X_ba.SetPos_dt(ChVector&lt;&gt;(100,20,53)); </div><div class="line">X_ba.SetWvel_loc(ChVector&lt;&gt;(0,40,0)); <span class="comment">// W in local frame, or..</span></div><div class="line">X_ba.SetWvel_par(ChVector&lt;&gt;(0,40,0)); <span class="comment">// W in parent frame</span></div><div class="line"></div><div class="line"><span class="comment">// set acceleration</span></div><div class="line">X_ba.SetPos_dtdt(ChVector&lt;&gt;(13,16,22)); </div><div class="line">X_ba.SetWacc_loc(ChVector&lt;&gt;(80,50,0)); <span class="comment">// a in local frame, or..</span></div><div class="line">X_ba.SetWacc_par(ChVector&lt;&gt;(80,50,0)); <span class="comment">// a in parent frame</span></div></div><!-- fragment --><p>A ChFrameMoving can be used to transform ChVector (points in space), a ChFrame, or ChFrameMoving objects. Velocities are also computed and transformed.</p>
<p>Example: The absolute velocity and angular velocity of <b>c</b> with respect to <b>a</b> can be computed if the transformation from <b>b</b> to <b>a</b> and from <b>c</b> to <b>b</b> is known:</p>
<div class="image">
<img src="coord_trasf5_framemoving.png" alt="coord_trasf5_framemoving.png"/>
</div>
<p>The case above translates in the following equivalent expressions, using the two alternative formalisms (Left-to-right based on &gt;&gt; operator, or right-to-left based on * operator):</p>
<div class="fragment"><div class="line">X_ca = X_cb &gt;&gt; X_ba;</div><div class="line">X_ca = X_ba * X_cb;</div></div><!-- fragment --><p>This is <em>exactly the same algebra</em> used in ChFrame and ChCoordsys, except that this time also the velocities and accelerations are also transformed.</p>
<p>Note that the transformation automatically takes into account the contributions of complex terms such as centripetal accelerations, relative accelerations, Coriolis acceleration, etc.</p>
<p>The following is another example with a longer concatenation of transformations:</p>
<div class="image">
<img src="coord_trasf6_framemoving.png" alt="coord_trasf6_framemoving.png"/>
</div>
<p>Note that one can also use the inverse of frame transformations, using GetInverse(), as seen for ChFrame.</p>
<p>Example: Computing the position, velocity and acceleration of the moving target 8 with respect to the gripper 6, expressed in the basis of the frame 6.</p>
<div class="image">
<img src="coord_robotexample.png" alt="coord_robotexample.png"/>
</div>
<p>How would one compute X_86 knowing all others? Start from two equivalent expressions of X_80: </p><pre class="fragment">    X_86&gt;&gt;X_65&gt;&gt;X_54&gt;&gt;X_43&gt;&gt;X_32&gt;&gt;X_21&gt;&gt;X_10 = X_87&gt;&gt;X_70; 
</pre><p>also: </p><pre class="fragment">    X_86&gt;&gt;(X_65&gt;&gt;X_54&gt;&gt;X_43&gt;&gt;X_32&gt;&gt;X_21&gt;&gt;X_10) = X_87&gt;&gt;X_70;
</pre><p>Post multiply both sides by inverse of (...), remember that in general</p>
<ul>
<li>X &gt;&gt; X.GetInverse() = I</li>
<li>X.GetInverse() &gt;&gt; X = I,</li>
</ul>
<p>where I is the identity transformation that can be removed, to finally get:</p>
<div class="fragment"><div class="line">X_86 = X_87 &gt;&gt; X_70 &gt;&gt; (X_65 &gt;&gt; X_54 &gt;&gt; X_43 &gt;&gt; X_32 &gt;&gt; X_21 &gt;&gt; X_10).GetInverse();</div></div><!-- fragment --><p>Example, based on the same figure: Computing velocity and acceleration of the gripper with respect to the moving target 8, expressed in the basis of reference frame 8.</p>
<div class="fragment"><div class="line">X_68 = X_12 &gt;&gt; X_23 &gt;&gt; X_34 &gt;&gt; X_45 &gt;&gt; X_56 &gt;&gt; (X_87 &gt;&gt; X_70).GetInverse();</div></div><!-- fragment --><p>See <a class="el" href="classchrono_1_1_ch_frame_moving.html">chrono::ChFrameMoving</a> for API details.</p>
<h1>Theory</h1>
<p>Additional details on the theoretical aspects of coordinate transformations in Chrono:</p><ul>
<li><a href="http://projectchrono.org/assets/white_papers/rotations.pdf">PDF whitepaper on rotations</a></li>
<li><a href="http://projectchrono.org/assets/white_papers/frame_kinematics.pdf">PDF whitepaper on coordinates</a></li>
</ul>
<h1>Examples</h1>
<ul>
<li>demo_coords.cpp </li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 1 2016 15:43:09 for Project Chrono by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11 . <a href="mailto:info@projectchrono.org">Contact us</a> for issues related to this page. 
</small></address>
</body>
</html>
